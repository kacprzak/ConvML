task :default => [:test]

task :test do
  validate("../convml_11_template.xml")
  validate("routeSegmentTypeTest.xml")
end

def validate(file, shouldBeValid=true)
  schema = "../convml_11.xsd"
  sh "xmllint --noout --schema #{schema} #{file} 2> test.log" do |ok, res|
    if !ok && shouldBeValid
      sh "cat test.log"
    elsif ok && !shouldBeValid
      puts "WARNING: #{file} should not be vaild!"
    end
  end
end
